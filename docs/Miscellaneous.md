### HTTP Header Parameters
With an OAuth 2.0 Access Token, an application can now invoke our APIs by including the access token in the HTTP header. Our APIs currently only supports application/json content type.

	## Authorization 	
OAuth 2.0 Access Token. Bearer keyword followed by a space and the OAuth 2.0 Access Token. Bearer <Access-Token>

	## Content-Type 	
Only application/json content type is supported.

	### Security Credentials
M-Pesa Core authenticates a transaction by decrypting the security credentials. Security credentials are generated by encrypting the base64 encoded initiator password with M-Pesa’s public key, a X509 certificate.

The algorithm for generating security credentials is as follows:

    Write the unencrypted password into a byte array.

    Encrypt the array with the M-Pesa public key certificate. Use the RSA algorithm, and use PKCS #1.5 padding (not OAEP), and add the result to the encrypted stream.

    Convert the resulting encrypted byte array into a string using base64 encoding. The resulting base64 encoded string is the security credential.

### Command IDs

	##TransactionReversal 
Reversal for an erroneous C2B transaction.

	##SalaryPayment 	
Used to send money from an employer to employees e.g. salaries

	##BusinessPayment 	
Used to send money from business to customer e.g. refunds

	##PromotionPayment 	
Used to send money when promotions take place e.g. raffle winners

	##AccountBalance 	
Used to check the balance in a paybill/buy goods account (includes utility, MMF, Merchant, Charges paid account).

	##CustomerPayBillOnline 	
Used to simulate a transaction taking place in the case of C2B Simulate Transaction or to initiate a transaction on behalf of the customer (STK Push).

	##TransactionStatusQuery 
Used to query the details of a transaction.

	##CheckIdentity 	
Similar to STK push, uses M-Pesa PIN as a service.

	##BusinessPayBill 	
Sending funds from one paybill to another paybill

	##BusinessBuyGoods 	
sending funds from buy goods to another buy goods.

	##DisburseFundsToBusiness 	
Transfer of funds from utility to MMF account.

	##BusinessToBusinessTransfer 	
Transferring funds from one paybills MMF to another paybills MMF account.

	##BusinessTransferFromMMFToUtility 
Transferring funds from paybills MMF to another paybills utility account.

### Identifier Types

Identifier types - both sender and receiver - identify an M-Pesa transaction’s sending and receiving party as either a shortcode, a till number or a MSISDN (phone number). 

There are three identifier types that can be used with M-Pesa APIs.

#Identifier 	Identity
	1 		MSISDN
	2 		Till Number
	4 		Shortcode

### M-Pesa Result Codes

#Result Code 	Description
	0 			Success
	1 			Insufficient Funds
	2 			Less Than Minimum Transaction Value
	3 			More Than Maximum Transaction Value
	4 			Would Exceed Daily Transfer Limit
	5 			Would Exceed Minimum Balance
	6 			Unresolved Primary Party
	7 			Unresolved Receiver Party
	8 			Would Exceed Maxiumum Balance
	11 			Debit Account Invalid
	12 			Credit Account Invaliud
	13 			Unresolved Debit Account
	14 			Unresolved Credit Account
	15 			Duplicate Detected
	17 			Internal Failure
	20 			Unresolved Initiator
	26 			Traffic blocking condition in place

###M-Pesa Response Codes (from client back to gateway)

Response codes are sent from the clients endpoints back to the gateway. This is done to acknowledge that the client has received the results.

#Result Code 				Description
	0 							Success (for C2B)
	00000000 					Success (For APIs that are not C2B)
	1 or any other number 		Rejecting the transaction